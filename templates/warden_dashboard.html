{% extends 'base.html' %}
{% block content %}
  <h2>Warden Dashboard</h2>
  <section class="card">
    <h3>Pending Student Approvals</h3>
    {% for s in pending_students %}
      <div>{{ s.name }} - {{ s.email }} <a href="/warden/approve_student/{{ s._id }}">Approve</a></div>
    {% else %}
      <div>No pending students</div>
    {% endfor %}
  </section>

  <section class="card">
    <h3>Room Requests</h3>
    {% for r in requests %}
      <div>
        {{ r.student.name }} applied for room {{ r.room.room_number }}
        <a href="/warden/approve_request/{{ r.req_id }}">Approve</a>
        <a href="/warden/reject_request/{{ r.req_id }}">Reject</a>
      </div>
    {% else %}
      <div>No pending requests</div>
    {% endfor %}
  </section>

  <section class="card">
    <h3>Rooms</h3>
    {% for room in rooms %}
      <div>
        {{ room.room_number }} | capacity: {{ room.capacity }} | type: {{ room.type }} | AC: {{ 'Yes' if room.ac else 'No' }} | room_type: {{ room.room_type }} | occupants: {{ room.occupants|length }}
        <a href="/warden/room_edit/{{ room._id }}">Edit</a>
      </div>
    {% endfor %}
    <h4>Add Room</h4>
    <form method="post" action="/warden/add_room">
      <input type="hidden" name="csrf_token" value="{{ csrf_token }}">
      <label>Room Number<br><input name="room_number" required></label>
      <label>Capacity<br><input name="capacity" required type="number" min="1" max="3"></label>
      <label>Type<br><input name="type"></label>
      <label><input type="checkbox" name="ac"> AC</label>
      <label>Room Type:
        <select name="room_type">
          <option value="any">Any</option>
          <option value="double">Double</option>
          <option value="triple">Triple</option>
        </select>
      </label>
      <button type="submit">Add</button>
    </form>
  </section>
{% endblock %}