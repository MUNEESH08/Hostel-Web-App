{% extends 'base.html' %}
{% block content %}
  <h2>Warden Dashboard</h2>

  <section class="card">
    <h3>Pending Student Approvals</h3>
    {% for s in pending_students %}
      <div>{{ s.name }} - {{ s.email }} 
        <a href="/warden/approve_student/{{ s._id }}">Approve</a>
      </div>
    {% else %}
      <div>No pending students</div>
    {% endfor %}
  </section>

  <section class="card">
    <h3>Room Requests</h3>
    {% for r in requests %}
      <div>
        {{ r.student.name }} applied for room {{ r.room.room_no }}
        <a href="/warden/approve_request/{{ r.req._id }}">Approve</a>
        <a href="/warden/reject_request/{{ r.req._id }}">Reject</a>
      </div>
    {% else %}
      <div>No pending requests</div>
    {% endfor %}
  </section>

  <section class="card">
    <h3>Rooms</h3>
    {% for room in rooms %}
      <div>
        {{ room.room_no }} | Capacity: {{ room.vacancies }} |
        Room Type: {{ room.room_type }} | AC Type: {{ room.ac_type }} |
        Occupants: {{ room.current_students }}
        <a href="/warden/room/edit/{{ room._id }}">Edit</a>
      </div>
    {% endfor %}

    <h4>Add Room</h4>
    <form method="post" action="/warden/room/add">
      <label>Room Number<br><input name="room_no" required></label>
      <label>Capacity<br><input name="vacancies" required type="number" min="1"></label>
      <label>Room Type<br><input name="room_type"></label>
      <label>AC Type<br>
        <select name="ac_type">
          <option value="AC">AC</option>
          <option value="Non-AC">Non-AC</option>
        </select>
      </label>
      <button type="submit">Add</button>
    </form>
  </section>
{% endblock %}
